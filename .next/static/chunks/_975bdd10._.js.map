{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jplk2/Documents/MIT%20SLOAN/hackathon-ui/app/posts/create/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { SignInButton, useAuth } from '@clerk/nextjs'\r\n\r\nimport { redirect } from 'next/navigation'\r\nimport { trpc } from '@/app/_trpc/client'\r\nimport { useState } from 'react'\r\nimport React from 'react'\r\n\r\nexport default function NewPost() {\r\n    // MediaSource support test (for debugging)\r\n    const [mediaSupport, setMediaSupport] = useState<string[]>([]);\r\n    React.useEffect(() => {\r\n        if (typeof window !== 'undefined' && 'MediaSource' in window) {\r\n            const types = [\r\n                'audio/webm; codecs=\"opus\"',\r\n                'audio/webm; codecs=\"vorbis\"',\r\n                'audio/mpeg',\r\n                'audio/mp4; codecs=\"mp4a.40.2\"',\r\n                'video/webm; codecs=\"vp8,opus\"',\r\n            ];\r\n            const results = types.map(type => `${type}: ${window.MediaSource.isTypeSupported(type)}`);\r\n            setMediaSupport(results);\r\n        }\r\n    }, []);\r\n    const [title, setTitle] = useState('')\r\n    const [content, setContent] = useState('')\r\n    // Use Clerk's `useAuth()` hook to get the user's ID\r\n    const { userId, isLoaded } = useAuth()\r\n    // Use the `createPosts` mutation from the TRPC client\r\n    const createPostMutation = trpc.post.createPosts.useMutation()\r\n\r\n    // Check if Clerk is loaded\r\n    if (!isLoaded) {\r\n        return (\r\n            <div className=\"flex h-[calc(100vh-4rem)] flex-col items-center justify-center space-y-4\">\r\n                <div>Loading...</div>\r\n                { }\r\n            </div>\r\n        )\r\n    }\r\n\r\n    // Protect this page from unauthenticated users\r\n    if (!userId) {\r\n        return (\r\n            <div className=\"flex h-[calc(100vh-4rem)] flex-col items-center justify-center space-y-4\">\r\n                <p>You must be signed in to create a post.</p>\r\n                <SignInButton>\r\n                    <button\r\n                        type=\"submit\"\r\n                        className=\"inline-block cursor-pointer rounded-lg border-2 border-current px-4 py-2 text-current transition-all hover:scale-[0.98]\"\r\n                    >\r\n                        Sign in\r\n                    </button>\r\n                </SignInButton>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    // Handle form submission\r\n    async function createPost(e: React.FormEvent<HTMLFormElement>) {\r\n        e.preventDefault()\r\n\r\n        createPostMutation.mutate({\r\n            title,\r\n            content,\r\n            authorId: userId as string,\r\n        })\r\n\r\n        redirect('/')\r\n    }\r\n\r\n    return (\r\n        <div className=\"mx-auto max-w-2xl p-4\">\r\n            {/* MediaSource support test output */}\r\n            <div className=\"mb-4 p-2 border rounded bg-gray-50 text-sm\">\r\n                <div className=\"font-bold mb-1\">MediaSource Audio Type Support:</div>\r\n                <ul>\r\n                    {mediaSupport.map((line, i) => (\r\n                        <li key={i}>{line}</li>\r\n                    ))}\r\n                </ul>\r\n            </div>\r\n            <h1 className=\"mb-6 text-2xl font-bold\">Create New Post</h1>\r\n            <form onSubmit={createPost} className=\"space-y-6\">\r\n                <div>\r\n                    <label htmlFor=\"title\" className=\"mb-2 block text-lg\">\r\n                        Title\r\n                    </label>\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"title\"\r\n                        name=\"title\"\r\n                        value={title}\r\n                        onChange={(e) => setTitle(e.target.value)}\r\n                        placeholder=\"Enter your post title\"\r\n                        className=\"w-full rounded-lg border px-4 py-2\"\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <label htmlFor=\"content\" className=\"mb-2 block text-lg\">\r\n                        Content\r\n                    </label>\r\n                    <textarea\r\n                        id=\"content\"\r\n                        name=\"content\"\r\n                        value={content}\r\n                        onChange={(e) => setContent(e.target.value)}\r\n                        placeholder=\"Write your post content here...\"\r\n                        rows={6}\r\n                        className=\"w-full rounded-lg border px-4 py-2\"\r\n                    />\r\n                </div>\r\n                <button\r\n                    type=\"submit\"\r\n                    className=\"inline-block w-full rounded-lg border-2 border-current px-4 py-2 text-current transition-all hover:scale-[0.98]\"\r\n                >\r\n                    Create Post\r\n                </button>\r\n            </form>\r\n        </div>\r\n    )\r\n}"],"names":[],"mappings":";;;;AAEA;AAAA;AAEA;AACA;AACA;;;AANA;;;;;;AASe,SAAS;;IACpB,2CAA2C;IAC3C,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IAC7D,6JAAA,CAAA,UAAK,CAAC,SAAS;6BAAC;YACZ,IAAI,aAAkB,eAAe,iBAAiB,QAAQ;gBAC1D,MAAM,QAAQ;oBACV;oBACA;oBACA;oBACA;oBACA;iBACH;gBACD,MAAM,UAAU,MAAM,GAAG;iDAAC,CAAA,OAAQ,AAAC,GAAW,OAAT,MAAK,MAA6C,OAAzC,OAAO,WAAW,CAAC,eAAe,CAAC;;gBACjF,gBAAgB;YACpB;QACJ;4BAAG,EAAE;IACL,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,oDAAoD;IACpD,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,qPAAA,CAAA,UAAO,AAAD;IACnC,sDAAsD;IACtD,MAAM,qBAAqB,yHAAA,CAAA,OAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW;IAE5D,2BAA2B;IAC3B,IAAI,CAAC,UAAU;QACX,qBACI,6LAAC;YAAI,WAAU;sBACX,cAAA,6LAAC;0BAAI;;;;;;;;;;;IAIjB;IAEA,+CAA+C;IAC/C,IAAI,CAAC,QAAQ;QACT,qBACI,6LAAC;YAAI,WAAU;;8BACX,6LAAC;8BAAE;;;;;;8BACH,6LAAC,8KAAA,CAAA,eAAY;8BACT,cAAA,6LAAC;wBACG,MAAK;wBACL,WAAU;kCACb;;;;;;;;;;;;;;;;;IAMjB;IAGA,yBAAyB;IACzB,eAAe,WAAW,CAAmC;QACzD,EAAE,cAAc;QAEhB,mBAAmB,MAAM,CAAC;YACtB;YACA;YACA,UAAU;QACd;QAEA,CAAA,GAAA,qIAAA,CAAA,WAAQ,AAAD,EAAE;IACb;IAEA,qBACI,6LAAC;QAAI,WAAU;;0BAEX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;kCAAiB;;;;;;kCAChC,6LAAC;kCACI,aAAa,GAAG,CAAC,CAAC,MAAM,kBACrB,6LAAC;0CAAY;+BAAJ;;;;;;;;;;;;;;;;0BAIrB,6LAAC;gBAAG,WAAU;0BAA0B;;;;;;0BACxC,6LAAC;gBAAK,UAAU;gBAAY,WAAU;;kCAClC,6LAAC;;0CACG,6LAAC;gCAAM,SAAQ;gCAAQ,WAAU;0CAAqB;;;;;;0CAGtD,6LAAC;gCACG,MAAK;gCACL,IAAG;gCACH,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gCACxC,aAAY;gCACZ,WAAU;;;;;;;;;;;;kCAGlB,6LAAC;;0CACG,6LAAC;gCAAM,SAAQ;gCAAU,WAAU;0CAAqB;;;;;;0CAGxD,6LAAC;gCACG,IAAG;gCACH,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;gCAC1C,aAAY;gCACZ,MAAM;gCACN,WAAU;;;;;;;;;;;;kCAGlB,6LAAC;wBACG,MAAK;wBACL,WAAU;kCACb;;;;;;;;;;;;;;;;;;AAMjB;GAlHwB;;QAmBS,qPAAA,CAAA,UAAO;;;KAnBhB","debugId":null}}]
}